<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Simple example</title>
    <script src="../source/FlexJoystick.js"></script>
</head>
<body>
    <h1>Simple joysticks examples</h1>
    <div id="example_1_Div_1"></div>
    <table style="margin:auto;">
        <tr>
            <td class="textTd"><b>X:</b></td>
            <td class="spanTd">&nbsp;<span id="t1s1">0</span></td>
            <td class="textTd"><span><b>Y:</b></span></td>
            <td class="spanTd">&nbsp;<span id="t1s2">0</span></td>
        </tr>
    </table>
    <div id="example_1_Div_2"></div>
    <table style="margin:auto;">
        <tr>
            <td class="textTd"><b>X:</b></td>
            <td class="spanTd">&nbsp;<span id="t2s1">0</span></td>
            <td class="textTd"><span><b>Y:</b></span></td>
            <td class="spanTd">&nbsp;<span id="t2s2">0</span></td>
        </tr>
    </table>
    <div id="example_1_Div_3"></div>
    <table style="margin:auto;">
        <tr>
            <td class="textTd"><b>X:</b></td>
            <td class="spanTd">&nbsp;<span id="t3s1">0</span></td>
            <td class="textTd"><span><b>Y:</b></span></td>
            <td class="spanTd">&nbsp;<span id="t3s2">0</span></td>
        </tr>
    </table>

    <button onclick="test()">click me</button>
    <span id="click">2</span>

    <script>
        let joystick1 = new FlexJoystick("example_1_Div_1");
        let joystick2 = new FlexJoystick("example_1_Div_2");
        let joystick3 = new FlexJoystick("example_1_Div_3");

        document.getElementById("example_1_Div_1").addEventListener("mousedown", function(event){
            document.onselectstart = () => {return false};
            joystick1.handleMouseDown(event);
            document.getElementById("t1s1").innerHTML = joystick1.getStickAngle();
            document.getElementById("t1s2").innerHTML = joystick1.getStickRadius();
        }, false);
        
        document.getElementById("example_1_Div_2").addEventListener("mousedown", function(event){
            document.onselectstart = () => {return false};
            joystick2.handleMouseDown(event);
            document.getElementById("t2s1").innerHTML = joystick2.getStickX();
            document.getElementById("t2s2").innerHTML = joystick2.getStickY();
        }, false);

        document.getElementById("example_1_Div_3").addEventListener("mousedown", function(event){
            document.onselectstart = () => {return false};
            joystick3.handleMouseDown(event);
        }, false);

        document.addEventListener("mousemove", function(event){
            joystick1.handleMouseMove(event);
            joystick2.handleMouseMove(event);
            joystick3.handleMouseMove(event);

            document.getElementById("t1s1").innerHTML = joystick1.getStickAngle();
            document.getElementById("t1s2").innerHTML = joystick1.getStickRadius();

            document.getElementById("t2s1").innerHTML = joystick2.getStickX();
            document.getElementById("t2s2").innerHTML = joystick2.getStickY();

            document.getElementById("t3s1").innerHTML = joystick3.getStickX();
            document.getElementById("t3s2").innerHTML = joystick3.getStickY();

        }, false);

        document.addEventListener("mouseup", function(event){
            document.onselectstart = () => {return true};

            let listener = setInterval(function(){
                joystick1.handleAnimation();
                document.getElementById("t1s1").innerHTML = joystick1.getStickAngle();
                document.getElementById("t1s2").innerHTML = joystick1.getStickRadius();
            }, 10);
            joystick1.enableAnimation(listener);
            
            joystick1.handleMouseUp(event, true);
            joystick2.handleMouseUp(event, true);
            joystick3.handleMouseUp(event, false);

            document.getElementById("t2s1").innerHTML = joystick2.getStickX();
            document.getElementById("t2s2").innerHTML = joystick2.getStickY();

            document.getElementById("t3s1").innerHTML = joystick3.getStickX();
            document.getElementById("t3s2").innerHTML = joystick3.getStickY();

        },false);

        function test(){
            // document.getElementById("example_1_Div_1Outline").style.background = 'black';
            // document.getElementById("example_1_Div_1").style.width = '202px';
            // document.getElementById("example_1_Div_1Stick").style.width = '50px';
            document.getElementById("example_1_Div_3Outline").style.borderRadius = '15px';
            document.getElementById("example_1_Div_3Stick").style.borderRadius = '10px';
            document.getElementById("example_1_Div_3Stick").style.width = '100px';
            joystick3.updateJoystickDimensions();
            // document.getElementById("click").innerHTML = document.getElementById("example_1_Div_1Stick").clientWidth;
        }

            // document.getElementById("example_1_Div_3Outline").style.background = "red"

    </script>
    
    </body>

</html>